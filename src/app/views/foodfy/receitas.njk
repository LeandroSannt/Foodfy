{% extends "foodfy/layout.njk" %}

{% block title %}
    <title>Receitas-Foodfy</title>
{% endblock %}

{% block filter %}
    <div class="filter">
        <form action="/buscar" method="GET">
            <input type="text" placeholder="Receita ou Chef" name="filter" value="{{filter}}">
            <button type="submit" value="{{filter}}">Buscar</button>
        </form>
    </div>
{% endblock filter %}

{% block content %}
    <div class="content">
        <aside class="cards" id="cursor">
                {% for recipe in recipes %}
                    <div class="card" id="{{recipe.id}}">
                        <div class="img-card">
                            <img src={{recipe.image}} alt="{{recipe.title}}">
                        </div>
                        <div class="info-card">
                            <p>{{recipe.title}}</p>
                            <p class="criador">{{recipe.chefs_name}}</p>
                        </div>
                    </div>
                {% endfor %}
        </aside>


                <div class="pagination"
            data-page={{pagination.page}}
            data-total={{pagination.total}}
            data-filter={{filter}}
        ></div>
    </div>

    <script>

        const cards = document.querySelectorAll(".card")
        for (let card of cards) {
    card.addEventListener("click", () => {
        const cardId = card.getAttribute("id")
        window.location.href = `/receita/${cardId}`
        console.log(cardId)
    })
}

    </script>

{% endblock %}

{% block pagination %}
<script src="/pagination.js"></script>
{% endblock pagination %}

{%block script%}
    <script src="/scripts.js"></script>
    {%endblock%}