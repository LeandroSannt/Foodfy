{% extends "admin/layoutAdmin.njk" %}

{% block content %}

    <section class="title">
        <div class="cabecalho">
            <h1>Usuários</h1>
            <a class ="createReceita" href="/admin/users/new">Cadastar Usuário</a>
        </div>

        <div class="card-user">
            {%for  user in users%}
                <div class="infor-user">
                    <form id= "form-delete" method='POST' action='/admin/users?_method=DELETE'>
                        <h3>{{user.name}}</h3>
                        <p>{{user.email}}</p>
                        <a class="action-edit" href="/admin/users/{{user.id}}/edit">Editar</a>
                        <button class='button remove'  type='submit' >Remover</button>
                        <input type='hidden' name='id' value={{user.id}}>
                    </form> 
                </div>
                
             {%endfor%}
         </div>
    </section>

{% endblock content %}



{% block confirmDelete %}
    <script>
        const formDelete= document.querySelector("#form-delete")
        formDelete.addEventListener("submit",function(event){
            const confirmation = confirm("Deseja deletar o usuário?")
            if(!confirmation){
                event.preventDefault()
        }
    })
    </script>

{% endblock confirmDelete %}



